<div class="content-area post-album pjax-area">
  <div class="grid grid-cols-3 gap-2">
    <div class="pic-area">
      <div id="imgbox" class="pic-item" style="background-image:url('<%- page.cover || theme.header.img %>');">
      </div>
      <div class="album-list flex gap-2">
        <% for (var i in page.photos) { %>
        <a class="album-item lazy-bg" id="<%- i %>" rel="<%- page.photos[i] %>" href="javascript:void(0);" onClick="changeimg(event)" data-src="<%- page.photos[i] %>" aria-label="the photo <%- i %>"></a>
        <% } %>
      </div>

    </div>
    <div class="album-info">
      <div class="album-info-main">
        <div class="album-title"><%- page.title %></div>
        <span class="album-subtitle">
          <%= page.date.format(config.date_format) %><br />
        </span>
        <span class="album-subtitle">
          <%= page.excerpt %>
        </span>
        <div class="album-article article">
          <%- page.content %>
        </div>
      </div>
      <div class="album-info-btm">
        <% if ( page.location ){ %>
        <div class="album-location">
          <iconpark-icon name="aiming"></iconpark-icon><span><%- page.location %></span>
        </div>
        <% } %>
      </div>
    </div>
  </div>
  <div class="album-comment">
    <%- partial('_partial/comment') %>
  </div>
</div>
<script>
  $(function() {
    $("a.lazy-bg").lazyload();
  });
  var imageBox = document.getElementById("imgbox");

  function changeimg() {
    var imgLink = event.target.getAttribute('rel');
    imageBox.style.backgroundImage = "url(" + imgLink + ")";
  }
</script>
<section class="pjax-area">
  <style>
    body {
      background-color: #fff;
    }

    .content-area {
      padding: 16px;
    }

    .album-comment {
      padding: 12px 0;
      max-width: 800px;
      margin: 0 auto;
    }

    .album-comment .v {
    }

    @media (max-width: 768px) {
      .content-area {
        max-width: 100vw;
      }

      .pic-area {
        grid-column: span 3 / span 3;
      }

      .album-info {
        grid-column: span 3 / span 3;
        padding: 12px;
      }

      .album-article {
        padding: 12px 0;
      }
    }

    @media (min-width: 768px) {
      .content-area {
        max-width: 92%;
        padding-top: 118px;
        margin: 0 auto;
      }

      .pic-area {
        grid-column: span 2 / span 2;
      }

      .album-info {
        grid-column: span 1 / span 1;
      }
    }

    @media (min-width: 1304px) {
      .content-area {
        max-width: 1200px;
      }
    }

    .pic-item {
      aspect-ratio: 3 / 2;
      background-size: cover;
      background-position: center;
      transition: all .3s ease-in-out;
      min-height: 297px;
    }

    .album-info {
      flex-direction: column;
      justify-content: space-between;
      color: #222831;
    }

    .album-title {
      font-size: 1.6em;
    }

    .album-subtitle {
      font-size: .8em;
      opacity: 0.8;
    }


    .album-location {
      display: inline-flex;
      font-size: .8em;
      color: #71afdd;
      gap: 4px;
      padding-bottom: 4px;
    }

    .album-list {
      padding-top: 12px;
      overflow-x: scroll;
    }

    .album-item {
      aspect-ratio: 1 / 1;
      min-height: 100px;
      min-width: 100px;
      background-size: cover;
      background-position: center;
    }

    @media (prefers-color-scheme: dark) {
      .album-info {
        color: #fff;
      }

      .album-location {
        color: #bdbdbd;
      }
    }
  </style>
</section>